# ğŸš€ GCP RAG ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ì´ë“œ

GCPë¥¼ í™œìš©í•œ ê³ ê¸‰ RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œ êµ¬ì¶• ë° ì‚¬ìš©ë²•

## ğŸ“‹ ê°œìš”

### ğŸ¯ ëª©í‘œ
- **ëª¨ë“œíŒ©ë³„ ì „ìš© ì§€ì‹ ë² ì´ìŠ¤** êµ¬ì¶•
- **ì‹¤ì‹œê°„ ë²¡í„° ê²€ìƒ‰**ìœ¼ë¡œ ê´€ë ¨ ì •ë³´ ì¶”ì¶œ
- **ê°œë°œììš© ë””ë²„ê·¸ ë„êµ¬**ë¡œ ê²€ìƒ‰ ê²°ê³¼ ì‹¤ì‹œê°„ í™•ì¸
- **í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”**ë¡œ AI API ë¹„ìš© ì ˆì•½
- **ê°„í¸í•œ ë¡¤ë°± ì‹œìŠ¤í…œ**ìœ¼ë¡œ ì•ˆì „í•œ í…ŒìŠ¤íŠ¸

### ğŸ—ï¸ ì•„í‚¤í…ì²˜
```
ëª¨ë“œíŒ© íŒŒì¼ë“¤ â†’ ë²¡í„°í™” â†’ GCP Firestore â†’ ê²€ìƒ‰ â†’ AI(ì›¹ê²€ìƒ‰) â†’ ë‹µë³€
      â†“                    â†“              â†“
   recipes.json        ì„ë² ë”© ìƒì„±      ìœ ì‚¬ë„ ê²€ìƒ‰
   mods/*.jar         Vertex AI       ìƒìœ„ Kê°œ ì„ íƒ
   kubejs/*.js       í…ìŠ¤íŠ¸ ì²­í‚¹      í† í° ì œí•œ ì ìš©
```

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ê¸°ë³¸ ìš”êµ¬ì‚¬í•­
```bash
# Python 3.9+
python --version

# ê¸°ë³¸ ë°±ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. GCP RAG ì‹œìŠ¤í…œ ì„¤ì¹˜
```bash
# GCP RAG ì‹œìŠ¤í…œ ì„¤ì¹˜
./install_gcp_rag.sh

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì¹˜
pip install -r requirements-gcp-rag.txt
```

### 3. GCP í”„ë¡œì íŠ¸ ì„¤ì • (ì›¹ ë¸Œë¼ìš°ì € ì‚¬ìš©) ğŸŒ

#### 3.1 Google ê³„ì •ìœ¼ë¡œ GCP ì½˜ì†” ì ‘ì†
1. **Chrome ë¸Œë¼ìš°ì €**ì—ì„œ https://console.cloud.google.com ì ‘ì†
2. **Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸** (Gmail ê³„ì • ì‚¬ìš© ê°€ëŠ¥)

**ğŸ†• ì‹ ê·œ ì‚¬ìš©ìì¸ ê²½ìš°:**
- **ì•½ê´€ ë™ì˜** ë° **ê²°ì œ ì •ë³´ ë“±ë¡** í•„ìš” âš ï¸
- **ë¬´ë£Œ í¬ë ˆë”§ $300** ì œê³µ
- **ì‹ ìš©ì¹´ë“œ** ë“±ë¡ í•„ìš”í•˜ì§€ë§Œ ë¬´ë£Œ í•œë„ ë‚´ì—ì„œëŠ” ê³¼ê¸ˆë˜ì§€ ì•ŠìŒ

**ğŸ”„ ê¸°ì¡´ GCP ì‚¬ìš©ìì¸ ê²½ìš°:** 
- ì´ë¯¸ ì„¤ì •ëœ **ê²°ì œ ê³„ì •** ë° **í”„ë¡œì íŠ¸**ê°€ ìˆì„ ìˆ˜ ìˆìŒ
- **ë¬´ë£Œ í¬ë ˆë”§ì„ ì´ë¯¸ ì‚¬ìš©** ì¤‘ì´ì–´ë„ ë¬¸ì œ ì—†ìŒ
- **Always Free í‹°ì–´** ì œí’ˆë“¤ì€ ê³„ì† ë¬´ë£Œë¡œ ì‚¬ìš© ê°€ëŠ¥:
  - Firestore: ë§¤ì¼ **20,000íšŒ ì½ê¸°**, **20,000íšŒ ì“°ê¸°** ë¬´ë£Œ
  - Vertex AI: ë§¤ì›” **ì¼ì • ì„ë² ë”© í˜¸ì¶œ** ë¬´ë£Œ ì œê³µ
- **ê¸°ì¡´ í”„ë¡œì íŠ¸ ì‚¬ìš©** ë˜ëŠ” **ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±** ëª¨ë‘ ê°€ëŠ¥

#### 3.2 í”„ë¡œì íŠ¸ ì„ íƒ ë˜ëŠ” ìƒì„±

**ğŸ“‹ ì˜µì…˜ 1: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± (ê¶Œì¥)**
1. **ìƒë‹¨ í”„ë¡œì íŠ¸ ì„ íƒ ë“œë¡­ë‹¤ìš´** í´ë¦­
2. **"ìƒˆ í”„ë¡œì íŠ¸"** ë²„íŠ¼ í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   ```
   í”„ë¡œì íŠ¸ ì´ë¦„: ModpackAI RAG System
   í”„ë¡œì íŠ¸ ID: modpack-ai-rag-2024 (ìë™ ìƒì„±ë˜ëŠ” ê³ ìœ  ID ì‚¬ìš©)
   ```
4. **ê²°ì œ ê³„ì • ì„ íƒ**: ê¸°ì¡´ ê²°ì œ ê³„ì •ì´ ìˆë‹¤ë©´ ì„ íƒ
5. **"ë§Œë“¤ê¸°"** í´ë¦­í•˜ê³  1-2ë¶„ ëŒ€ê¸°

**ğŸ”„ ì˜µì…˜ 2: ê¸°ì¡´ í”„ë¡œì íŠ¸ ì‚¬ìš©**
1. **ìƒë‹¨ í”„ë¡œì íŠ¸ ì„ íƒ ë“œë¡­ë‹¤ìš´** í´ë¦­
2. **ê¸°ì¡´ í”„ë¡œì íŠ¸** ëª©ë¡ì—ì„œ ì‚¬ìš©í•  í”„ë¡œì íŠ¸ ì„ íƒ
3. âš ï¸ **ì£¼ì˜ì‚¬í•­**: 
   - ê¸°ì¡´ Firestore ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆë‹¤ë©´ **ë°ì´í„° ì¶©ëŒ** ê°€ëŠ¥ì„± ìˆìŒ
   - **ìƒˆ ì»¬ë ‰ì…˜**ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ê¸°ì¡´ ë°ì´í„°ì—ëŠ” ì˜í–¥ ì—†ìŒ
   - **API ì‚¬ìš©ëŸ‰**ì´ ê¸°ì¡´ í”„ë¡œì íŠ¸ì™€ **í•©ì‚°**ë¨

#### 3.3 í•„ìˆ˜ API í™œì„±í™”
1. **ì™¼ìª½ ë©”ë‰´** â†’ **"API ë° ì„œë¹„ìŠ¤"** â†’ **"ë¼ì´ë¸ŒëŸ¬ë¦¬"** í´ë¦­
2. ë‹¤ìŒ 3ê°œ APIë¥¼ í•˜ë‚˜ì”© ê²€ìƒ‰í•˜ê³  í™œì„±í™”:

   **ğŸ“Š Firestore API í™œì„±í™”**
   - ê²€ìƒ‰ì°½ì— **"Cloud Firestore API"** ì…ë ¥
   - **"Cloud Firestore API"** í´ë¦­ â†’ **"ì‚¬ìš©"** ë²„íŠ¼ í´ë¦­
   
   **ğŸ¤– Vertex AI API í™œì„±í™”**  
   - ê²€ìƒ‰ì°½ì— **"Vertex AI API"** ì…ë ¥
   - **"Vertex AI API"** í´ë¦­ â†’ **"ì‚¬ìš©"** ë²„íŠ¼ í´ë¦­
   
   **ğŸ“ Cloud Translation API í™œì„±í™”** (ì„ íƒì‚¬í•­)
   - ê²€ìƒ‰ì°½ì— **"Cloud Translation API"** ì…ë ¥
   - **"Cloud Translation API"** í´ë¦­ â†’ **"ì‚¬ìš©"** ë²„íŠ¼ í´ë¦­

#### 3.4 Firestore ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
1. **ì™¼ìª½ ë©”ë‰´** â†’ **"Firestore"** â†’ **"ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°"** í´ë¦­
2. **ëª¨ë“œ ì„ íƒ**: **"Native ëª¨ë“œ"** ì„ íƒ (ê¶Œì¥)
3. **ìœ„ì¹˜ ì„ íƒ**: **"us-central1 (ì•„ì´ì˜¤ì™€)"** ì„ íƒ (í•œêµ­ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ë¦¬ì „)
4. **"ì™„ë£Œ"** í´ë¦­í•˜ê³  2-3ë¶„ ëŒ€ê¸°

#### 3.5 ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± ë° í‚¤ ë‹¤ìš´ë¡œë“œ â­
1. **ì™¼ìª½ ë©”ë‰´** â†’ **"IAM ë° ê´€ë¦¬"** â†’ **"ì„œë¹„ìŠ¤ ê³„ì •"** í´ë¦­
2. **"ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°"** í´ë¦­
3. ì„œë¹„ìŠ¤ ê³„ì • ì •ë³´ ì…ë ¥:
   ```
   ì„œë¹„ìŠ¤ ê³„ì • ì´ë¦„: modpack-ai-rag
   ì„œë¹„ìŠ¤ ê³„ì • ID: modpack-ai-rag (ìë™ ìƒì„±)
   ì„¤ëª…: ModpackAI RAG System Service Account
   ```
4. **"ë§Œë“¤ê³  ê³„ì†í•˜ê¸°"** í´ë¦­

5. **ê¶Œí•œ ë¶€ì—¬** (ì¤‘ìš”!):
   - **"ì—­í•  ì„ íƒ"** ë“œë¡­ë‹¤ìš´ í´ë¦­
   - **"Cloud Datastore ì‚¬ìš©ì"** ê²€ìƒ‰í•˜ê³  ì„ íƒ
   - **"ë‹¤ë¥¸ ì—­í•  ì¶”ê°€"** í´ë¦­
   - **"Vertex AI ì‚¬ìš©ì"** ê²€ìƒ‰í•˜ê³  ì„ íƒ
   - **"ê³„ì†"** í´ë¦­

6. **"ì™„ë£Œ"** í´ë¦­

7. **í‚¤ íŒŒì¼ ë‹¤ìš´ë¡œë“œ**:
   - ìƒì„±ëœ ì„œë¹„ìŠ¤ ê³„ì •ì„ **í´ë¦­**
   - **"í‚¤"** íƒ­ í´ë¦­
   - **"í‚¤ ì¶”ê°€"** â†’ **"ìƒˆ í‚¤ ë§Œë“¤ê¸°"** í´ë¦­
   - **"JSON"** ì„ íƒ â†’ **"ë§Œë“¤ê¸°"** í´ë¦­
   - ğŸ’¾ **í‚¤ íŒŒì¼ ìë™ ë‹¤ìš´ë¡œë“œë¨** (ì˜ˆ: `modpack-ai-rag-1234567890.json`)

#### 3.6 ë‹¤ìš´ë¡œë“œí•œ í‚¤ íŒŒì¼ ì´ë™
```bash
# ë‹¤ìš´ë¡œë“œ í´ë”ì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™ (Windows ì˜ˆì‹œ)
move C:\Users\%USERNAME%\Downloads\modpack-ai-rag-*.json C:\Users\Administrator\minecraft-modpack-ai\backend\gcp-key.json

# Linux/Mac ì˜ˆì‹œ
mv ~/Downloads/modpack-ai-rag-*.json ~/minecraft-modpack-ai/backend/gcp-key.json
```

### 4. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

#### 4.1 í”„ë¡œì íŠ¸ ID í™•ì¸
- **GCP ì½˜ì†” ìƒë‹¨**ì—ì„œ í”„ë¡œì íŠ¸ ì´ë¦„ ì˜†ì— í‘œì‹œë˜ëŠ” **í”„ë¡œì íŠ¸ ID** ë³µì‚¬
- ì˜ˆ: `modpack-ai-rag-2024-123456`

#### 4.2 .env íŒŒì¼ ìˆ˜ì •
```bash
# .env íŒŒì¼ í¸ì§‘
nano .env
```

```env
# === GCP RAG ì„¤ì • ===
GCP_RAG_ENABLED=true
GCP_PROJECT_ID=modpack-ai-rag-2024-123456
GOOGLE_APPLICATION_CREDENTIALS=C:\Users\Administrator\minecraft-modpack-ai\backend\gcp-key.json

# === ê¸°ì¡´ ì„¤ì • ===
GOOGLE_API_KEY=your-gemini-api-key
GEMINI_WEBSEARCH_ENABLED=true
```

#### 4.3 ì„¤ì • í™•ì¸
```bash
# ë°±ì—”ë“œ ì‹œì‘í•´ì„œ GCP RAG ìƒíƒœ í™•ì¸
python app.py

# ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ìƒíƒœ í™•ì¸
curl -X GET http://localhost:5000/gcp-rag/status
```

#### âœ… ì„±ê³µ ì‹œ ì¶œë ¥ ì˜ˆì‹œ:
```json
{
  "success": true,
  "gcp_rag_enabled": true,
  "gcp_rag_available": true,
  "project_id": "modpack-ai-rag-2024-123456",
  "location": "us-central1",
  "local_rag_enabled": true
}
```

### ğŸš¨ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•´ê²°

#### âŒ ë¬¸ì œ 1: "GCP RAG ì‹œìŠ¤í…œ ë¹„í™œì„±í™”"
```bash
# í•´ê²°ì±…: API í™œì„±í™” í™•ì¸
# GCP ì½˜ì†” â†’ API ë° ì„œë¹„ìŠ¤ â†’ ì‚¬ìš© ì„¤ì •ëœ APIì—ì„œ í™•ì¸
# - Cloud Firestore API âœ…
# - Vertex AI API âœ…
```

#### âŒ ë¬¸ì œ 2: "ì¸ì¦ ì‹¤íŒ¨"  
```bash
# í•´ê²°ì±…: í‚¤ íŒŒì¼ ê²½ë¡œ í™•ì¸
ls -la /path/to/gcp-key.json  # íŒŒì¼ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
cat .env | grep GOOGLE_APPLICATION_CREDENTIALS  # í™˜ê²½ë³€ìˆ˜ í™•ì¸
```

#### âŒ ë¬¸ì œ 3: "ê¶Œí•œ ë¶€ì¡±"
```bash
# í•´ê²°ì±…: ì„œë¹„ìŠ¤ ê³„ì • ê¶Œí•œ ì¬í™•ì¸
# GCP ì½˜ì†” â†’ IAM ë° ê´€ë¦¬ â†’ IAM
# ì„œë¹„ìŠ¤ ê³„ì •ì— ë‹¤ìŒ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸:
# - Cloud Datastore ì‚¬ìš©ì
# - Vertex AI ì‚¬ìš©ì  
```

### ğŸ’¡ ì¶”ê°€ íŒ

#### ğŸ’¸ **ë¹„ìš© ê´€ë¦¬ (ê¸°ì¡´ ì‚¬ìš©ì íŠ¹íˆ ì¤‘ìš”!)**
- **Always Free í•œë„**: 
  - Firestore: ë§¤ì¼ 20,000íšŒ ì½ê¸°/ì“°ê¸° **ì˜êµ¬ ë¬´ë£Œ**
  - Vertex AI: ì›”ê°„ ì„ë² ë”© API í˜¸ì¶œ ì¼ì •ëŸ‰ **ë¬´ë£Œ**
- **ë¬´ë£Œ í•œë„ ì´ˆê³¼ ì‹œ**: ë§¤ìš° ì €ë ´í•œ ë‹¨ê°€ (Firestore ì½ê¸°: $0.0006/1000íšŒ)
- **ë¹„ìš© ì•Œë¦¼ ì„¤ì •**: GCP ì½˜ì†” â†’ ê²°ì œ â†’ ì˜ˆì‚° ë° ì•Œë¦¼ì—ì„œ **$5 ì•Œë¦¼** ì„¤ì • ê¶Œì¥
- **ì‹¤ì œ ì˜ˆìƒ ë¹„ìš©**: 
  - ëª¨ë“œíŒ© 1ê°œ ì¸ë±ì‹±: **~$0.50-1.00** (1íšŒì„±)
  - ì›”ê°„ ê²€ìƒ‰ 1000íšŒ: **~$0.10-0.30**

#### ğŸ”„ **ê¸°ì¡´ ê³„ì • í™œìš© ì‹œ ì¥ì **
- **ê²°ì œ ì •ë³´ ì¬ì…ë ¥ ë¶ˆí•„ìš”**
- **ê¸°ì¡´ í”„ë¡œì íŠ¸ì™€ ë¶„ë¦¬ ê´€ë¦¬ ê°€ëŠ¥**
- **í†µí•© ê²°ì œì„œ**ë¡œ í•œ ë²ˆì— ê´€ë¦¬
- **ë¬´ë£Œ í¬ë ˆë”§ ì†Œì§„ë˜ì–´ë„ Always Free ì œí’ˆì€ ê³„ì† ë¬´ë£Œ**

#### ğŸ”’ **ë³´ì•ˆ ê´€ë¦¬**
- **í‚¤ íŒŒì¼**: ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!
- **ì„œë¹„ìŠ¤ ê³„ì •**: ìµœì†Œ ê¶Œí•œ ì›ì¹™ (Datastore + Vertex AIë§Œ)
- **í‚¤ ë¡œí…Œì´ì…˜**: 3-6ê°œì›”ë§ˆë‹¤ ìƒˆ í‚¤ ìƒì„± ê¶Œì¥

#### ğŸŒ **ì„±ëŠ¥ ìµœì í™”**
- **ë¦¬ì „**: `us-central1` ì¶”ì²œ (í•œêµ­ì—ì„œ ê°€ì¥ ë¹ ë¦„)
- **ë°ì´í„° ì§€ì—­ì„±**: Firestoreì™€ Vertex AI ë™ì¼ ë¦¬ì „ ì‚¬ìš©
- **ìºì‹±**: ìì£¼ ê²€ìƒ‰í•˜ëŠ” ì¿¼ë¦¬ëŠ” ë¡œì»¬ ìºì‹œ í™œìš©

#### ğŸ“Š **ëª¨ë‹ˆí„°ë§**
- **ì‹¤ì‹œê°„ ì‚¬ìš©ëŸ‰**: GCP ì½˜ì†”ì—ì„œ API í˜¸ì¶œëŸ‰ í™•ì¸
- **ë¹„ìš© ëŒ€ì‹œë³´ë“œ**: ì›”ê°„/ì¼ê°„ ë¹„ìš© íŠ¸ë Œë“œ ëª¨ë‹ˆí„°ë§
- **í• ë‹¹ëŸ‰ ê´€ë¦¬**: API í˜¸ì¶œ í•œë„ ì„¤ì •ìœ¼ë¡œ ë¹„ìš© ì œì–´

## ğŸ® ì‚¬ìš©ë²•

### 1. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
```bash
# ë°±ì—”ë“œ ì‹œì‘
python app.py

# ìƒíƒœ í™•ì¸
curl -X GET http://localhost:5000/gcp-rag/status
```

### 2. ëª¨ë“œíŒ© ì¸ë±ìŠ¤ êµ¬ì¶•
```bash
# POST /gcp-rag/build
curl -X POST http://localhost:5000/gcp-rag/build \
  -H "Content-Type: application/json" \
  -d '{
    "modpack_name": "enigmatica_6",
    "modpack_version": "1.0.0",
    "modpack_path": "/home/user/enigmatica_6"
  }'
```

#### ì‘ë‹µ ì˜ˆì‹œ
```json
{
  "success": true,
  "modpack_name": "enigmatica_6",
  "modpack_version": "1.0.0",
  "collection_name": "modpack_enigmatica_6_1_0_0",
  "document_count": 1250,
  "stats": {
    "recipes": 450,
    "mods": 150,
    "kubejs": 650
  }
}
```

### 3. ê²€ìƒ‰ ê²°ê³¼ í™•ì¸ (ê°œë°œììš©)
```bash
# POST /gcp-rag/search - ì‹¤ì œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ëˆˆìœ¼ë¡œ í™•ì¸
curl -X POST http://localhost:5000/gcp-rag/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "iron block recipe",
    "modpack_name": "enigmatica_6",
    "modpack_version": "1.0.0",
    "top_k": 5,
    "min_score": 0.7
  }'
```

#### ì‘ë‹µ ì˜ˆì‹œ - ê²€ìƒ‰ëœ ì •ë³´ê°€ ì‹¤ì œë¡œ ìœ ìš©í•œì§€ í™•ì¸ ê°€ëŠ¥!
```json
{
  "success": true,
  "query": "iron block recipe",
  "modpack": "enigmatica_6 v1.0.0",
  "results_count": 3,
  "results": [
    {
      "doc_id": "abc123",
      "text": "Shaped recipe for iron_block x1: keys={'I': 'iron_ingot'}",
      "doc_type": "recipe",
      "doc_source": "/data/minecraft/recipes/iron_block.json",
      "similarity": 0.89,
      "text_length": 58
    },
    {
      "doc_id": "def456", 
      "text": "kubejs script: startup_scripts/iron_variants.js => // ì²  ê´€ë ¨ ì•„ì´í…œë“¤ì˜ ëŒ€ì²´ ë ˆì‹œí”¼ ì¶”ê°€...",
      "doc_type": "kubejs",
      "doc_source": "/kubejs/startup_scripts/iron_variants.js",
      "similarity": 0.76,
      "text_length": 245
    }
  ],
  "search_params": {
    "top_k": 5,
    "min_score": 0.7
  }
}
```

### 4. í†µí•© ì±„íŒ… í…ŒìŠ¤íŠ¸
```bash
# POST /chat - RAGê°€ ì ìš©ëœ ì‹¤ì œ ì±„íŒ…
curl -X POST http://localhost:5000/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "ì²  ë¸”ë¡ì„ ì–´ë–»ê²Œ ë§Œë“¤ì–´?",
    "player_uuid": "test-player",
    "modpack_name": "enigmatica_6",
    "modpack_version": "1.0.0"
  }'
```

#### ì‘ë‹µ ì˜ˆì‹œ - ë””ë²„ê·¸ ì •ë³´ í¬í•¨
```json
{
  "success": true,
  "response": "ì²  ë¸”ë¡ì„ ë§Œë“¤ë ¤ë©´ ì²  ì£¼ê´´ 9ê°œë¥¼ 3x3 ì œì‘ëŒ€ì— ë°°ì¹˜í•˜ì„¸ìš”...",
  "model": "gemini",
  "rag": {
    "enabled": true,
    "gcp_enabled": true,
    "hits": 3,
    "used": true,
    "used_chars": 384,
    "debug_info": {
      "gcp_rag": {
        "used": true,
        "results_count": 3,
        "results": [
          {
            "similarity": 0.89,
            "doc_type": "recipe",
            "text": "Shaped recipe for iron_block..."
          }
        ]
      }
    }
  }
}
```

### 5. ë“±ë¡ëœ ëª¨ë“œíŒ© í™•ì¸
```bash
# GET /gcp-rag/modpacks
curl -X GET http://localhost:5000/gcp-rag/modpacks
```

### 6. ìë™í™” í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
```bash
# ëŒ€í™”í˜• í…ŒìŠ¤íŠ¸ ë„êµ¬
python test_gcp_rag.py
```

## ğŸ”§ ê³ ê¸‰ ì„¤ì •

### í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”
```env
# .env íŒŒì¼ì—ì„œ ì¡°ì • ê°€ëŠ¥
RAG_TOP_K=5                    # ê²€ìƒ‰í•  ë¬¸ì„œ ìˆ˜ (ê¸°ë³¸: 5)
RAG_SNIPPET_MAX_CHARS=500      # ë¬¸ì„œë‹¹ ìµœëŒ€ ë¬¸ììˆ˜ (ê¸°ë³¸: 500)
RAG_TOTAL_MAX_CHARS=1500       # ì „ì²´ RAG í…ìŠ¤íŠ¸ ìµœëŒ€ ë¬¸ììˆ˜ (ê¸°ë³¸: 1500)
```

### ê²€ìƒ‰ í’ˆì§ˆ ì¡°ì •
```python
# ê²€ìƒ‰ API í˜¸ì¶œ ì‹œ íŒŒë¼ë¯¸í„° ì¡°ì •
{
  "top_k": 10,        # ë” ë§ì€ ê²°ê³¼ (ìµœëŒ€ 20)
  "min_score": 0.6    # ë” ë‚®ì€ ì„ê³„ê°’ (ë” ë§ì€ ê²°ê³¼)
}
```

### í…ìŠ¤íŠ¸ ì²­í‚¹ ì¡°ì •
```python
# gcp_rag_system.pyì—ì„œ ìˆ˜ì • ê°€ëŠ¥
def _chunk_text(self, text: str, max_chars: int = 1000):
    # ì²­í¬ í¬ê¸° ì¡°ì • (ê¸°ë³¸: 1000ì)
```

## ğŸš¨ ë¬¸ì œ í•´ê²°

### 1. GCP RAG ì‹œìŠ¤í…œ ë¹„í™œì„±í™”
```bash
# ìƒíƒœ í™•ì¸
curl -X GET http://localhost:5000/gcp-rag/status

# ì¼ë°˜ì ì¸ ë¬¸ì œë“¤
# - GCP_PROJECT_ID ë¯¸ì„¤ì •
# - ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ ê²½ë¡œ ì˜¤ë¥˜  
# - API ê¶Œí•œ ë¶€ì¡±
```

### 2. ì„ë² ë”© ìƒì„± ì‹¤íŒ¨
```bash
# Vertex AI API í™œì„±í™” í™•ì¸
gcloud services list --enabled --filter="name:aiplatform.googleapis.com"

# ê¶Œí•œ í™•ì¸
gcloud auth application-default print-access-token
```

### 3. Firestore ì—°ê²° ì‹¤íŒ¨
```bash
# Firestore API í™œì„±í™” í™•ì¸
gcloud services list --enabled --filter="name:firestore.googleapis.com"

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± (í•„ìš” ì‹œ)
gcloud firestore databases create --region=us-central1
```

### 4. ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ
```python
# ê²€ìƒ‰ ì„ê³„ê°’ ë‚®ì¶”ê¸°
{
  "min_score": 0.5  # ê¸°ë³¸ 0.7ì—ì„œ ë‚®ì¶¤
}

# ë˜ëŠ” ë¡œê·¸ í™•ì¸
tail -f logs/gcp_rag.log
```

## ğŸ”„ ë¡¤ë°± ë° ì œê±°

### 1. GCP RAG ë¹„í™œì„±í™” (ë°ì´í„° ë³´ì¡´)
```bash
# .env íŒŒì¼ì—ì„œ ë¹„í™œì„±í™”
GCP_RAG_ENABLED=false

# ë°±ì—”ë“œ ì¬ì‹œì‘ í›„ ë¡œì»¬ RAGë¡œ ìë™ í´ë°±
```

### 2. ì™„ì „ ì œê±°
```bash
# ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./uninstall_gcp_rag.sh

# ë˜ëŠ” ìˆ˜ë™ ì œê±°
rm -f gcp_rag_system.py
rm -f requirements-gcp-rag.txt
pip uninstall -y google-cloud-firestore google-cloud-aiplatform vertexai
```

### 3. GCP ë¦¬ì†ŒìŠ¤ ì •ë¦¬
```bash
# Firestore ì»¬ë ‰ì…˜ ì‚­ì œ (í•„ìš” ì‹œ)
# ì£¼ì˜: ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤
gcloud firestore delete --all-collections

# í”„ë¡œì íŠ¸ ì™„ì „ ì‚­ì œ (í•„ìš” ì‹œ)  
gcloud projects delete your-modpack-ai-project
```

## ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

### ë¹„ìš© ì¶”ì 
```bash
# GCP ì½˜ì†”ì—ì„œ í™•ì¸:
# - Firestore ì½ê¸°/ì“°ê¸° ì‘ì—… ìˆ˜
# - Vertex AI ì„ë² ë”© API í˜¸ì¶œ ìˆ˜
# - ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰
```

### ì‘ë‹µ ì‹œê°„ ìµœì í™”
- **ë¡œì»¬ RAG**: ~100-500ms
- **GCP RAG**: ~1-3ì´ˆ (ì²« ê²€ìƒ‰ í›„ ìºì‹œë¨)
- **Gemini ì›¹ê²€ìƒ‰**: ~2-5ì´ˆ

### ê¶Œì¥ ì‚¬í•­
- ëª¨ë“œíŒ©ë‹¹ **10,000ê°œ ì´í•˜ ë¬¸ì„œ** ê¶Œì¥
- ì²­í¬ í¬ê¸° **800-1200ì** ê¶Œì¥  
- ê²€ìƒ‰ **top_k=5-10** ê¶Œì¥
- ì„ê³„ê°’ **min_score=0.6-0.8** ê¶Œì¥

## ğŸ¯ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. ê°œë°œ ë‹¨ê³„
```bash
# 1ë‹¨ê³„: ë¡œì»¬ì—ì„œ ê¸°ë³¸ RAG í…ŒìŠ¤íŠ¸
GCP_RAG_ENABLED=false

# 2ë‹¨ê³„: GCP RAGë¡œ ì—…ê·¸ë ˆì´ë“œ
./install_gcp_rag.sh

# 3ë‹¨ê³„: ì†Œê·œëª¨ ëª¨ë“œíŒ©ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
python test_gcp_rag.py
```

### 2. í”„ë¡œë•ì…˜ ë°°í¬
```bash
# í™˜ê²½ ë¶„ë¦¬
# - ê°œë°œ: ë¡œì»¬ SQLite + ë¡œì»¬ RAG
# - ìŠ¤í…Œì´ì§•: GCP + í…ŒìŠ¤íŠ¸ ë°ì´í„°
# - í”„ë¡œë•ì…˜: GCP + ì „ì²´ ëª¨ë“œíŒ©
```

### 3. ëª¨ë‹ˆí„°ë§
```python
# ì‘ë‹µì— í¬í•¨ëœ ë””ë²„ê·¸ ì •ë³´ í™œìš©
{
  "rag": {
    "debug_info": {
      "gcp_rag": {
        "used": true,
        "results_count": 5,
        "results": [...]  # ì‹¤ì œ ê²€ìƒ‰ ê²°ê³¼ í™•ì¸
      }
    }
  }
}
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê°œì„ ì‚¬í•­ì´ë‚˜ ë²„ê·¸ ë¦¬í¬íŠ¸ëŠ” GitHub Issuesì—ì„œ í™˜ì˜í•©ë‹ˆë‹¤!

- **ê²€ìƒ‰ í’ˆì§ˆ ê°œì„ ** ì•„ì´ë””ì–´
- **ìƒˆë¡œìš´ ë¬¸ì„œ íƒ€ì…** ì§€ì›
- **ì„±ëŠ¥ ìµœì í™”** ì œì•ˆ
- **ì‚¬ìš©ì ê²½í—˜** ê°œì„ 

---

**â­ ì´ ê°€ì´ë“œê°€ ë„ì›€ì´ ë˜ì—ˆë‹¤ë©´ ìŠ¤íƒ€ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!**